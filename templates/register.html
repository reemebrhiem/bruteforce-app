<!DOCTYPE html>
<html>
<head>
    <title>إنشاء حساب</title>
</head>

<body style="text-align:center; margin-top:100px">

<h2>إنشاء حساب جديد</h2>

<input id="username" placeholder="اسم المستخدم"><br><br>
<input id="password" type="password" placeholder="كلمة المرور"><br><br>

<button onclick="register()">تسجيل</button>

<p id="msg" style="color:red"></p>

<script>
function register(){
    const msg = document.getElementById("msg");

    fetch("/register", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: "username=" + username.value + "&password=" + password.value
    })
    .then(res => {
        if (res.status === 201) {
            msg.style.color = "green";
            msg.innerText = "تم إنشاء الحساب بنجاح";
            setTimeout(() => location.href = "/", 1500);
        }
        else if (res.status === 409) {
            msg.innerText = "اسم المستخدم موجود مسبقًا";
        }
        else {
            msg.innerText = "حدث خطأ";
        }
    });
}
</script>
</body>
</html>
