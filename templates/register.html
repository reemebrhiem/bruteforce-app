<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>إنشاء حساب</title>
<style>
body {
    font-family: Arial;
    background: #f5f5f5;
}
.box {
    width: 320px;
    margin: 120px auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
}
input, button {
    width: 100%;
    padding: 10px;
    margin: 6px 0;
}
</style>
</head>

<body>
<div class="box">
<h2>إنشاء حساب</h2>

<input id="username" placeholder="اسم المستخدم">
<input id="password" type="password" placeholder="كلمة المرور">
<button onclick="register()">تسجيل</button>

<p id="msg"></p>
</div>

<script>
function register(){
    const msg = document.getElementById("msg");

    fetch("/register", {
        method: "POST",
        headers: {"Content-Type":"application/x-www-form-urlencoded"},
        body: "username=" + username.value + "&password=" + password.value
    })
    .then(res => {
        if(res.status === 201){
            msg.style.color="green";
            msg.innerText="تم إنشاء الحساب بنجاح";
            setTimeout(()=>location.href="/",1500);
        } else if(res.status === 409){
            msg.innerText="اسم المستخدم موجود مسبقًا";
        } else {
            msg.innerText="حدث خطأ";
        }
    });
}
</script>
</body>
</html>
